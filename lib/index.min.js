(()=>{var c=class{constructor(e){this.scrollConfig=e,this.open=0,this.ts_x,this.ts_y,this.scrollable=!0,this.afterSections=document.querySelector(".after-sections"),this.navScroll=document.createElement("div"),this.navScroll.setAttribute("class","nav-control"),this.toggleMenuBtn=document.querySelector(".jpage #toggle-menu-btn")}scroll(e,t,s){t==="down"?this.open++:t==="up"&&this.open--,document.body.scrollTo({top:window.innerHeight*this.open,behavior:e}),s===!0&&(this.scrollable=!1,setTimeout(()=>{this.scrollable=!0},this.scrollConfig.waitingTime))}activeScroll(){if(this.scrollConfig.showControls===!0){let e=document.querySelectorAll(".nav-control button");e[this.open]?.classList.add("active"),e.forEach((t,s)=>s!==this.open?t.classList.remove("active"):null)}}resizeSections(e){e.forEach(t=>{document.body.style.height=`${window.innerHeight}px`,t.style.height=`${window.innerHeight}px`})}updateSectionWhenResize(e){window.addEventListener("resize",()=>{this.resizeSections(e),this.scroll("auto")})}updateSectionWhenWheel(e){window.addEventListener("wheel",t=>{t.deltaY>0&&this.open<e.length-1&&this.scrollable?this.scroll("smooth","down",!0):t.deltaY<0&&this.open>0&&this.scrollable?(!this.afterSections||this.afterSections.scrollTop===0)&&(this.scroll("smooth","up",!0),this.toggleMenuBtn.classList.remove("none")):this.open+1===e.length&&this.scrollable&&this.afterSections&&(this.scroll("smooth","down",!0),this.scrollConfig.afterSections.menuVisible||this.toggleMenuBtn.classList.add("none")),this.activeScroll()})}updateSectionWhenTouch(e){window.addEventListener("touchstart",t=>{this.ts_x=t.touches[0].clientX,this.ts_y=t.touches[0].clientY}),window.addEventListener("touchend",t=>{let s=t.changedTouches[0].clientX-this.ts_x,o=t.changedTouches[0].clientY-this.ts_y;Math.abs(s)<=Math.abs(o)&&(o<0?this.open<e.length-1?this.scroll("smooth","down"):this.open+1===e.length&&this.scrollable&&this.afterSections&&(this.scroll("smooth","down"),this.scrollConfig.afterSections.menuVisible||this.toggleMenuBtn.classList.add("none")):o>0&&this.open>0&&(!this.afterSections||this.afterSections.scrollTop===0)&&(this.scroll("smooth","up"),this.toggleMenuBtn.classList.remove("none")),this.activeScroll())})}updateSectionWhenKeydown(e){window.addEventListener("keydown",t=>{t.code==="ArrowDown"?this.open<e.length-1?this.scroll("smooth","down",!0):this.open+1===e.length&&this.scrollable&&this.afterSections&&(this.scroll("smooth","down",!0),this.scrollConfig.afterSections.menuVisible||this.toggleMenuBtn.classList.add("none")):t.code==="ArrowUp"&&this.open>0&&(!this.afterSections||this.afterSections.scrollTop===0)&&(this.scroll("smooth","up",!0),this.toggleMenuBtn.classList.remove("none")),this.activeScroll()})}createScroll(){let e=document.querySelector(".jpage"),t=document.querySelectorAll(".jpage .section");this.updateSectionWhenResize(t),this.updateSectionWhenWheel(t),this.updateSectionWhenTouch(t),this.updateSectionWhenKeydown(t),this.resizeSections(t),this.scrollConfig.showControls===!0&&(t.forEach((s,o)=>{let i=document.createElement("button");o===0&&i.classList.add("active"),i.onclick=()=>{this.open=o,this.activeScroll(),this.scroll("smooth")},this.navScroll.appendChild(i)}),e.appendChild(this.navScroll))}};var l=class{constructor(e){this.sliderConfig=e,this.ts_x,this.ts_y,this.mouseInitX=0,this.mouseDown=!1}activeSlide(e,t,s){this.sliderConfig.showControls===!0&&(e[t].classList.add("active-slide"),e.forEach((o,i)=>{i!==s&&o.classList.remove("active-slide")}))}updateSectionWhenResize(e,t){window.addEventListener("resize",function(){e.scrollTo({left:[...e.children][t].getBoundingClientRect().width*t})})}updateSectionWhenTouch(e,t,s){e.addEventListener("touchstart",o=>{this.ts_x=o.touches[0].clientX,this.ts_y=o.touches[0].clientY}),e.addEventListener("touchend",o=>{let i=o.changedTouches[0].clientX-this.ts_x,h=o.changedTouches[0].clientY-this.ts_y;Math.abs(i)>Math.abs(h)&&(i<0?(t<[...e.children].length-2?t++:t===[...e.children].length-2&&(t=0),e.scrollTo({left:[...e.children][t].getBoundingClientRect().width*t,behavior:"smooth"}),this.activeSlide([...s.children],t,t)):(t>0&&t--,e.scrollTo({left:[...e.children][t].getBoundingClientRect().width*t,behavior:"smooth"}),this.activeSlide([...s.children],t,t)))})}updateSectionWhenMouseDrag(e,t,s){e.addEventListener("mousedown",o=>{this.mouseInitX=o.pageX,this.mouseDown=!0}),e.addEventListener("mousemove",o=>{this.mouseDown&&(t+1<=[...e.children].length-2&&this.mouseInitX>o.pageX?e.scrollTo({left:window.innerWidth*(t+1)+this.mouseInitX-o.pageX-window.innerWidth}):t-1>=0&&this.mouseInitX<o.pageX&&e.scrollTo({left:window.innerWidth*(t-1)-o.pageX+this.mouseInitX+window.innerWidth}))}),e.addEventListener("mouseup",o=>{o.pageX<this.mouseInitX&&t<[...e.children].length-2?(t++,e.scrollTo({left:[...e.children][t].getBoundingClientRect().width*t,behavior:"smooth"})):o.pageX>this.mouseInitX&&t>0&&(t--,e.scrollTo({left:[...e.children][t].getBoundingClientRect().width*t,behavior:"smooth"})),this.activeSlide([...s.children],t,t),this.mouseDown=!1})}updateSectionWhenKeydown(e,t,s){window.addEventListener("keydown",o=>{e.getBoundingClientRect().top===0&&(o.code==="ArrowRight"?(t<[...e.children].length-2?t++:t===[...e.children].length-2&&(t=0),e.scrollTo({left:window.innerWidth*t,behavior:"smooth"}),this.activeSlide([...s.children],t,t)):o.code==="ArrowLeft"&&(t>0&&t--,e.scrollTo({left:[...e.children][t].getBoundingClientRect().width*t,behavior:"smooth"}),this.activeSlide([...s.children],t,t)))})}createSlider(e){e.forEach(t=>{let s=0,o=document.createElement("div");this.updateSectionWhenResize(t,s,o),this.updateSectionWhenTouch(t,s,o),this.updateSectionWhenMouseDrag(t,s,o),this.updateSectionWhenKeydown(t,s,o),o.setAttribute("class","nav-slider"),this.sliderConfig.showControls===!0&&[...t.children].forEach((i,h)=>{let u=document.createElement("button");h===0&&u.classList.add("active-slide"),u.onclick=()=>{s=h,this.activeSlide([...o.children],h,s),t.scrollTo({left:[...t.children][s].getBoundingClientRect().width*s,behavior:"smooth"})},o.appendChild(u)}),t.appendChild(o)})}};var r=class{constructor(e){this.menuConfig=e,this.menuIsOpen=!1,this.toggleMenuBtn=document.querySelector(".jpage #toggle-menu-btn"),this.menu=document.querySelector(".jpage .menu")}toggleMenu(){this.menuIsOpen=!this.menuIsOpen,this.menuIsOpen?(this.menu.style.height="100vh",this.toggleMenuBtn.innerHTML=this.menuConfig.buttonIconToClose):(this.menu.style.height="0vh",this.toggleMenuBtn.innerHTML=this.menuConfig.buttonIconToOpen)}createMenu(){this.menu&&this.toggleMenuBtn&&(this.toggleMenuBtn.innerHTML=this.menuConfig.buttonIconToOpen,this.toggleMenuBtn.addEventListener("click",()=>{this.toggleMenu()}))}};var d={scroller:{showControls:!0,waitingTime:400,afterSections:{menuVisible:!1}},slider:{showControls:!0},menu:{buttonIconToClose:"x",buttonIconToOpen:"o"}},a=d;try{if(jpageConfig){new c({...a.scroller,...jpageConfig.scroller}).createScroll();let e=document.querySelectorAll(".jpage .section .slider");new l({...a.slider,...jpageConfig.slider}).createSlider(e),new r({...a.menu,...jpageConfig.menu}).createMenu()}}catch(n){throw new Error(n.message)}})();
