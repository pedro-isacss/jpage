(()=>{var h=class{constructor(e){this.scrollConfig=e,this.open=0,this.ts_x,this.ts_y,this.scrollable=!0,this.afterSections=document.querySelector(".after-sections"),this.navScroll=document.createElement("div"),this.navScroll.setAttribute("class","nav-control"),this.toggleMenuBtn=document.querySelector(".jpage #toggle-menu-btn")}scroll(e,t,o){t==="down"?this.open++:t==="up"&&this.open--,document.body.scrollTo({top:window.innerHeight*this.open,behavior:e}),o===!0&&(this.scrollable=!1,setTimeout(()=>{this.scrollable=!0},this.scrollConfig.waitingTime))}activeScroll(){if(this.scrollConfig.showControls===!0){let e=document.querySelectorAll(".nav-control button");e[this.open]?.classList.add("active"),e.forEach((t,o)=>o!==this.open?t.classList.remove("active"):null)}}resizeSections(e){e.forEach(t=>{document.body.style.height=`${window.innerHeight}px`,t.style.height=`${window.innerHeight}px`})}updateSectionWhenResize(e){window.addEventListener("resize",()=>{this.resizeSections(e),this.scroll("auto")})}updateSectionWhenWheel(e){window.addEventListener("wheel",t=>{t.deltaY>0&&this.open<e.length-1&&this.scrollable?this.scroll("smooth","down",!0):t.deltaY<0&&this.open>0&&this.scrollable?(!this.afterSections||this.afterSections.scrollTop===0)&&(this.scroll("smooth","up",!0),this.toggleMenuBtn?.classList.remove("none")):this.open+1===e.length&&this.scrollable&&this.afterSections&&(this.scroll("smooth","down",!0),this.scrollConfig.afterSections.menuVisible||this.toggleMenuBtn?.classList.add("none")),this.activeScroll()})}updateSectionWhenTouch(e){window.addEventListener("touchstart",t=>{this.ts_x=t.touches[0].clientX,this.ts_y=t.touches[0].clientY}),window.addEventListener("touchend",t=>{let o=t.changedTouches[0].clientX-this.ts_x,s=t.changedTouches[0].clientY-this.ts_y;Math.abs(o)<=Math.abs(s)&&(s<0?this.open<e.length-1?this.scroll("smooth","down"):this.open+1===e.length&&this.scrollable&&this.afterSections&&(this.scroll("smooth","down"),this.scrollConfig.afterSections.menuVisible||this.toggleMenuBtn?.classList.add("none")):s>0&&this.open>0&&(!this.afterSections||this.afterSections.scrollTop===0)&&(this.scroll("smooth","up"),this.toggleMenuBtn?.classList.remove("none")),this.activeScroll())})}updateSectionWhenKeydown(e){window.addEventListener("keydown",t=>{t.code==="ArrowDown"?this.open<e.length-1?this.scroll("smooth","down",!0):this.open+1===e.length&&this.scrollable&&this.afterSections&&(this.scroll("smooth","down",!0),this.scrollConfig.afterSections.menuVisible||this.toggleMenuBtn?.classList.add("none")):t.code==="ArrowUp"&&this.open>0&&(!this.afterSections||this.afterSections.scrollTop===0)&&(this.scroll("smooth","up",!0),this.toggleMenuBtn?.classList.remove("none")),this.activeScroll()})}createScroll(){let e=document.querySelector(".jpage"),t=document.querySelectorAll(".jpage .section");this.updateSectionWhenResize(t),this.updateSectionWhenWheel(t),this.updateSectionWhenTouch(t),this.updateSectionWhenKeydown(t),this.resizeSections(t),this.scrollConfig.showControls===!0&&(t.forEach((o,s)=>{let n=document.createElement("button");s===0&&n.classList.add("active"),n.onclick=()=>{this.open=s,this.activeScroll(),this.scroll("smooth")},this.navScroll.appendChild(n)}),e.appendChild(this.navScroll))}};var c=class{constructor(e){this.sliderConfig=e,this.ts_x,this.ts_y,this.mouseInitX=0,this.mouseDown=!1}activeSlide(e,t,o){this.sliderConfig.showControls===!0&&(e[t].classList.add("active-slide"),e.forEach((s,n)=>{n!==o&&s.classList.remove("active-slide")}))}updateSectionWhenResize(e,t){window.addEventListener("resize",function(){e.scrollTo({left:[...e.children][t].getBoundingClientRect().width*t})})}updateSectionWhenTouch(e,t,o){e.addEventListener("touchstart",s=>{this.ts_x=s.touches[0].clientX,this.ts_y=s.touches[0].clientY}),e.addEventListener("touchend",s=>{let n=s.changedTouches[0].clientX-this.ts_x,i=s.changedTouches[0].clientY-this.ts_y;Math.abs(n)>Math.abs(i)&&(n<0?(t<[...e.children].length-2?t++:t===[...e.children].length-2&&(t=0),e.scrollTo({left:[...e.children][t].getBoundingClientRect().width*t,behavior:"smooth"}),this.activeSlide([...o.children],t,t)):(t>0&&t--,e.scrollTo({left:[...e.children][t].getBoundingClientRect().width*t,behavior:"smooth"}),this.activeSlide([...o.children],t,t)))})}updateSectionWhenMouseDrag(e,t,o,s){e.addEventListener("mousedown",n=>{this.mouseInitX=n.pageX,this.mouseDown=!0}),e.addEventListener("mousemove",n=>{this.mouseDown&&(t+1<=[...e.children].length-2&&this.mouseInitX>n.pageX?e.scrollTo({left:window.innerWidth*(t+1)+this.mouseInitX-n.pageX-window.innerWidth}):t-1>=0&&this.mouseInitX<n.pageX&&e.scrollTo({left:window.innerWidth*(t-1)-n.pageX+this.mouseInitX+window.innerWidth}))}),e.addEventListener("mouseup",n=>{n.pageX<this.mouseInitX&&t<[...e.children].length-2?(t++,e.scrollTo({left:[...e.children][t].getBoundingClientRect().width*t,behavior:"smooth"})):n.pageX>this.mouseInitX&&t>0&&(t--,e.scrollTo({left:[...e.children][t].getBoundingClientRect().width*t,behavior:"smooth"})),this.activeSlide([...o.children],t,t),this.mouseDown=!1,this.updateSectionWhenKeydown(e,t,o)})}updateSectionWhenKeydown(e,t,o){window.addEventListener("keydown",s=>{e.getBoundingClientRect().top===0&&(s.code==="ArrowRight"?(t<[...e.children].length-2?t++:t===[...e.children].length-2&&(t=0),e.scrollTo({left:window.innerWidth*t,behavior:"smooth"}),this.activeSlide([...o.children],t,t)):s.code==="ArrowLeft"&&(t>0&&t--,e.scrollTo({left:[...e.children][t].getBoundingClientRect().width*t,behavior:"smooth"}),this.activeSlide([...o.children],t,t)),this.updateSectionWhenMouseDrag(e,t,o))})}createSlider(e){e.forEach(t=>{let o=0,s=document.createElement("div");this.updateSectionWhenResize(t,o,s),this.updateSectionWhenTouch(t,o,s),this.updateSectionWhenMouseDrag(t,o,s),this.updateSectionWhenKeydown(t,o,s),s.setAttribute("class","nav-slider"),this.sliderConfig.showControls===!0&&[...t.children].forEach((n,i)=>{let d=document.createElement("button");i===0&&d.classList.add("active-slide"),d.onclick=()=>{o=i,this.activeSlide([...s.children],i,o),t.scrollTo({left:[...t.children][o].getBoundingClientRect().width*o,behavior:"smooth"}),this.updateSectionWhenResize(t,o,s),this.updateSectionWhenTouch(t,o,s),this.updateSectionWhenMouseDrag(t,o,s),this.updateSectionWhenKeydown(t,o,s)},s.appendChild(d)}),t.appendChild(s)})}};var l=class{constructor(e){this.menuConfig=e,this.menuIsOpen=!1,this.toggleMenuBtn=document.querySelector(".jpage #toggle-menu-btn"),this.menu=document.querySelector(".jpage .menu")}toggleMenu(){this.menuIsOpen=!this.menuIsOpen,this.menuIsOpen?(this.menu.style.height="100vh",this.toggleMenuBtn.innerHTML=this.menuConfig.buttonIconToClose):(this.menu.style.height="0vh",this.toggleMenuBtn.innerHTML=this.menuConfig.buttonIconToOpen)}createMenu(){this.menu&&this.toggleMenuBtn&&(this.toggleMenuBtn.innerHTML=this.menuConfig.buttonIconToOpen,this.toggleMenuBtn.addEventListener("click",()=>{this.toggleMenu()}))}};var g={scroller:{showControls:!0,waitingTime:400,afterSections:{menuVisible:!1}},slider:{showControls:!0},menu:{buttonIconToClose:"x",buttonIconToOpen:"o"}},a=g;var r;try{r=jpageConfig}catch{r={}}var f=new h({...a.scroller,...r.scroller});f.createScroll();var m=document.querySelectorAll(".jpage .section .slider"),w=new c({...a.slider,...r.slider});w.createSlider(m);var v=new l({...a.menu,...r.menu});v.createMenu();})();
